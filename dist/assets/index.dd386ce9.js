import{S as v,P as y,W as M,O as b,M as g,G as I,B as L,a as O,b as S,c as B,V as E,r as C,w as F,o as A,d as P,i as V,e as h,f as m,u as j,g as k,F as R,p as G,h as W,j as z,k as N,l as q,m as H,n as T,q as X}from"./vendor.79bd7b08.js";const U=function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const t of n)if(t.type==="childList")for(const l of t.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function e(n){const t={};return n.integrity&&(t.integrity=n.integrity),n.referrerpolicy&&(t.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?t.credentials="include":n.crossorigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function s(n){if(n.ep)return;n.ep=!0;const t=e(n);fetch(n.href,t)}};U();function D(){const a=new v,o=new y(45,window.innerWidth/window.innerHeight,.1,1e4),e=new M;e.setPixelRatio(window.devicePixelRatio),e.setClearColor(4473924,1),e.setSize(window.innerWidth,window.innerHeight);const s=new b(o,e.domElement);function n(){requestAnimationFrame(n),s.update(),e.render(a,o)}return n(),{scene:a,camera:o,renderer:e,controls:s}}function K(a){return new Promise(o=>{const e=new XMLHttpRequest;e.onprogress=s=>console.log("loading..",s.loaded),e.onloadend=()=>{console.log("onloadend..."),o(e.response)},e.responseType="arraybuffer",e.open("GET",a),e.send()})}const Y=new g({color:2236962}),Z=new g({color:16382457,polygonOffset:!0,polygonOffsetFactor:1,polygonOffsetUnits:1});function $(a,o){const e=new I;for(var s=0;s<a.triangleMeshes.length;s++){let l=a.triangleMeshes[s];const c=new L,d=l.vertex,u=l.index;c.setAttribute("position",new O(d,3)),c.setIndex(u),c.computeBoundingBox();let i=new S(c,Z),r=i.clone();r.material=Y,r.material.wireframe=!0,e.add(r),r.add(i)}var n=new B().setFromObject(e);const t=new E;return n.getCenter(t),o&&e.rotateX(-Math.PI/2),e.translateX(-t.x),e.translateY(-t.y),e.translateZ(-t.z),e}function J(a){const o={triangleMeshes:[]};if(a.byteLength<=0)return o;let e=new DataView(a),s=new Int32Array(1);s=e.getInt32(0,!0);let n=[];for(let t=0;t<s*4;t=t+4){let l=1,c=e.getInt32((l+t)*4,!0),d=e.getInt32((l+t+1)*4,!0),u=e.getInt32((l+t+2)*4,!0),i=e.getInt32((l+t+3)*4,!0);n.push({vertexStart:c,vertexEnd:d,indexStart:u,indexEnd:i})}for(let t=0;t<n.length;t++){let l=n[t].vertexEnd/4-n[t].vertexStart/4,c=new Float32Array(l),d=[],u=0;for(let i=n[t].vertexStart/4;i<n[t].vertexEnd/4;i=i+3){let r=e.getFloat32(i*4,!0),p=e.getFloat32((i+1)*4,!0),f=e.getFloat32((i+2)*4,!0);c[u++]=r,c[u++]=p,c[u++]=f}for(let i=n[t].indexStart/4;i<n[t].indexEnd/4;i=i+3){let r=e.getInt32(i*4,!0),p=e.getInt32((i+1)*4,!0),f=e.getInt32((i+2)*4,!0);d.push(r),d.push(p),d.push(f)}o.triangleMeshes.push({vertex:c,index:d})}return o}var Q=(a,o)=>{const e=a.__vccOpts||a;for(const[s,n]of o)e[s]=n;return e};const ee=a=>(G("data-v-a68ef2ec"),a=a(),W(),a),te=ee(()=>z("div",{id:"MeshView",class:"h-full"},null,-1)),ne={key:0,id:"loading",class:"fixed top-0 w-full h-full bg-black/50 text-white flex justify-center items-center"},re={setup(a){const o=C({file:"car",isLoading:!0});let e=null,s=null;const{scene:n,camera:t,renderer:l}=D();F(()=>o.file,async r=>{await c(e[r])}),A(async()=>{document.getElementById("MeshView").appendChild(l.domElement);const{data:r}=await P.get("./model.json");e=r,await c(e[o.file])});function c(r){return o.isLoading=!0,new Promise(async p=>{const f=await K("./"+r.path),x=$(J(f),r.isRotateX);d(x),u(r.v4),o.isLoading=!1,p()})}function d(r){s&&n.remove(s),s=r,s&&n.add(s)}function u(r){t.position.x=r[0],t.position.y=r[1],t.position.z=r[2],t.lookAt(r[3],r[4],r[5]),t.up.x=r[6],t.up.y=r[7],t.up.z=r[8]}return new V.GUI({name:"Mesh"}).add(o,"file",{\u8ECA:"car",\u96D5\u50CF:"man",house1:"house1",house2:"house2",\u98DB\u6A5F:"airplane"}).name("\u6A21\u578B"),(r,p)=>(h(),m(R,null,[te,j(o).isLoading?(h(),m("div",ne," Loading... ")):k("",!0)],64))}};var w=Q(re,[["__scopeId","data-v-a68ef2ec"]]);const oe={setup(a){return(o,e)=>{const s=N("router-view");return h(),q(s)}}};const se=H({history:T(),routes:[{path:"/",component:w},{path:"/:id",component:w}]}),_=X(oe);_.use(se);_.mount("#app");
